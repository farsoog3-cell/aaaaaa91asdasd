<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Molfa โ ุชุญููู ุงูุตูุฑุฉ ุฅูู ุทุฑุฒ ุฃุจูุถ/ุฃุณูุฏ</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  body{font-family:Inter,system-ui,Arial; background:#f3f4f6; color:#111;}
  .mono{font-family:ui-monospace,monospace;}
  .svg-wrap{width:100%;height:100%;display:flex;align-items:center;justify-content:center;}
  .svg-wrap svg,.svg-wrap object{width:100%;height:100%;}
  header p{font-size:0.95rem; opacity:0.95;}
  input[type="range"]{width:100%}
</style>
</head>
<body class="min-h-screen flex flex-col">
<header class="bg-indigo-700 text-white py-4 shadow text-center">
  <h1 class="text-xl font-semibold">Molfa โ ุตูุฑุฉ โ ุดุจูุฉ ุชุทุฑูุฒ (ุฃุจูุถ/ุฃุณูุฏ) + ุชุตุฏูุฑ</h1>
  <p>ููุชุฌ ูุฎุทุท ุชุทุฑูุฒ ุฃุจูุถ/ุฃุณูุฏ ุงุญุชุฑุงููุ ุงููุนุงููุฉ ุชุจููู ููู ุณูุธูุฑ ุงููุฎุทุทุ ูุงููููุงุช ุชุตุฏูุฑ ููุณ ุงููุฎุทุท ูููุงูููุฉ.</p>
</header>

<main class="container mx-auto p-4 md:p-6 flex-grow">
  <div class="bg-white rounded-xl shadow p-4 md:p-6">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
      <div>
        <label class="block font-medium">ุงุฎุชุฑ ุตูุฑุฉ</label>
        <input id="file" type="file" accept="image/*" class="w-full p-2 border rounded"/>

        <div class="mt-3">
          <label class="text-sm block mb-1">ุญุฌู ุงูุฎููุฉ (px)</label>
          <input id="cellSize" type="number" min="4" max="40" value="8" class="w-full p-2 border rounded"/>
          <div class="text-xs text-gray-500 mt-1">ูู ุฎุงูุฉ ุณุชููุฑูุฑ ุฃุจูุถ/ุฃุณูุฏ ุญุณุจ ุงูุนุชุจุฉ ูุชูุทุฑูุฒ ุฅุฐุง ูุงูุช ุณูุฏุงุก.</div>
        </div>

        <div class="mt-3">
          <label class="text-sm block mb-1">ุนุชุจุฉ ุงูุชุญููู ุฅูู ุงูุฃุจูุถ/ุฃุณูุฏ (0-255)</label>
          <input id="bwThreshold" type="range" min="0" max="255" value="128"/>
          <div class="text-xs text-gray-500 mt-1">ูููุฉ ุฃุนูู โ ุฃูุซุฑ ุฎูุงูุง ุชุตุจุญ ุจูุถุงุก (ุฃูู ุบุฑุฒ).</div>
        </div>

        <div class="mt-3">
          <label class="text-sm block mb-1">ุทูู ุงูุบุฑุฒุฉ ุฏุงุฎู ุถูุน X (px)</label>
          <input id="stitchStep" type="number" min="1" max="16" value="4" class="w-full p-2 border rounded"/>
        </div>

        <div class="mt-3">
          <label class="text-sm block mb-1">ูููุงุณ ุงูุชุตุฏูุฑ (px โ 0.1mm)</label>
          <input id="exportScale" type="number" value="0.2" step="0.05" min="0.05" max="5" class="w-full p-2 border rounded"/>
        </div>

        <div class="mt-4 flex gap-2">
          <button id="process" class="flex-1 bg-indigo-600 text-white py-2 rounded">๐ง ุชูููุฏ ูุชุตุฏูุฑ</button>
        </div>

        <div class="mt-3 grid grid-cols-2 gap-2">
          <button id="downloadSvg" class="hidden bg-blue-600 text-white py-2 rounded">โฌ๏ธ SVG</button>
          <button id="downloadDst" class="hidden bg-green-600 text-white py-2 rounded">โฌ๏ธ DST</button>
          <button id="downloadDte" class="hidden bg-pink-600 text-white py-2 rounded">โฌ๏ธ DTE</button>
          <button id="downloadDse" class="hidden bg-yellow-600 text-white py-2 rounded">โฌ๏ธ DSE</button>
          <button id="downloadPng" class="hidden bg-gray-700 text-white py-2 rounded">โฌ๏ธ PNG</button>
        </div>
      </div>

      <div class="md:col-span-2">
        <div class="bg-gray-50 p-3 rounded min-h-[380px] flex items-center justify-center">
          <div id="svgPreview" class="svg-wrap text-gray-500">ูู ูุชู ุงูุชูููุฏ ุจุนุฏ</div>
        </div>
        <pre id="log" class="mono text-xs h-40 overflow-auto whitespace-pre-wrap bg-white p-2 rounded border mt-3"></pre>
      </div>
    </div>
  </div>
</main>

<script src="stitcher.js"></script>
</body>
</html>